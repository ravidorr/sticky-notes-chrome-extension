<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Content Security Policy (fonts are self-hosted) -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://www.gstatic.com https://apis.google.com; style-src 'self' 'unsafe-inline'; font-src 'self'; img-src 'self' data: https:; connect-src 'self' https://*.cloudfunctions.net https://*.googleapis.com https://*.firebaseio.com; frame-src https://accounts.google.com https://*.firebaseapp.com; base-uri 'self'; form-action 'self';">
    
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    
    <!-- Preload self-hosted fonts -->
    <link rel="preload" href="fonts/inter-variable.woff2" as="font" type="font/woff2" crossorigin>
    
    <link rel="stylesheet" href="css/generate-key.min.css">
    
    <title>Generate API Key - Sticky Notes</title>
    <meta name="description" content="Generate an API key to use with Sticky Notes MCP server or dashboard">
    <meta name="robots" content="noindex">
</head>
<body>
    <main id="main-content" class="generate-key-page">
        <div class="container">
            <div class="key-form-card">
                <h1>Generate API Key</h1>
                <p>Sign in with Google to generate an API key for the Sticky Notes API or MCP server.</p>
                
                <div id="step1">
                    <button id="signInBtn" class="btn btn-primary">Sign in with Google</button>
                    <p id="userInfo" class="user-info" style="display: none;"></p>
                </div>
                
                <div id="step2" style="display: none;">
                    <hr class="form-divider">
                    
                    <div class="form-group">
                        <label for="keyName">Key Name</label>
                        <input type="text" id="keyName" placeholder="My Integration" value="Cursor MCP">
                    </div>
                    
                    <div class="form-group">
                        <label for="scopes">Permissions</label>
                        <select id="scopes">
                            <option value="both">Read & Write (notes:read, notes:write)</option>
                            <option value="read">Read Only (notes:read)</option>
                            <option value="write">Write Only (notes:write)</option>
                        </select>
                    </div>
                    
                    <button id="generateBtn" class="btn btn-primary">Generate API Key</button>
                </div>
                
                <p id="error" class="error-msg" style="display: none;"></p>
            </div>
            
            <div id="result" class="result-card" style="display: none;">
                <h3>Your API Key</h3>
                <div class="warning-box" role="alert">
                    Save this key now - it won't be shown again!
                </div>
                <div class="key-display" id="apiKeyDisplay" role="textbox" aria-readonly="true" aria-label="Generated API key"></div>
                
                <div class="btn-group">
                    <button id="copyBtn" class="btn btn-secondary">Copy to Clipboard</button>
                    <a href="dashboard.html" class="btn btn-primary">Go to Dashboard</a>
                </div>
                
                <h4>Test your key:</h4>
                <pre class="curl-example" id="curlExample" aria-label="Example curl command"></pre>
                
                <div class="next-steps">
                    <h4>What's next?</h4>
                    <p>Use your API key to connect to the Dashboard and view all your notes in one place.</p>
                    <a href="dashboard.html" class="btn btn-primary btn-large">Open Dashboard</a>
                </div>
            </div>
        </div>
    </main>

    <script type="module" src="js/generate-key.min.js"></script>
</body>
</html>
